# .htaccess - Carpeta /setap/
# Compatible con Apache 24 (Windows y Linux)
# Codificacion UTF-8

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /setap/
    
    # ===== ROUTING SIMPLE=====
    # Redirigir todo a la carpeta public excepto debug y logs
    RewriteCond %{REQUEST_URI} !^/setap/debug/
    RewriteCond %{REQUEST_URI} !^/setap/logs/
    # Permitir acceso directo a archivos de /public
    RewriteCond %{REQUEST_URI} !^/setap/public/
    # Redirigir todas las dem√°s solicitudes a public/
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>

# ===== CONFIGURACION GENERAL =====
Options -Indexes
DirectoryIndex index.php index.html

# ===== PROTECCION DE ARCHIVOS SENSIBLES =====
<FilesMatch "\.(env|ini|log|sh|bak|config|sql)$">
    <RequireAll>
        Require all denied
    </RequireAll>
</FilesMatch>

# ===== HEADERS DE SEGURIDAD =====
<IfModule mod_headers.c>
    Header always set X-Frame-Options SAMEORIGIN
    Header always set X-Content-Type-Options nosniff
    Header always set X-XSS-Protection "1; mode=block"
    Header unset X-Powered-By
    Header set X-Debug-Panel "enabled"
    Header set X-Debug-Active "true"
</IfModule>

## ===== PHP HANDLER =====
#<IfModule mime_module>
#  # PHP Handler (production - cPanel EasyApache)
#  AddHandler application/x-httpd-ea-php83 .php .php8 .phtml
#</IfModule>

<IfModule mod_php.c>
    #php_value session.save_path "/home/usuario/public_html/setap/storage/sessions"
    php_value session.save_path "/setap/storage/sessions"
    php_value session.cookie_path "/setap"
</IfModule>

# ===== CHARSET =====
AddDefaultCharset UTF-8